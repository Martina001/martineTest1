> leetcodeç¬¬[1780. åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦å¯ä»¥è¡¨ç¤ºæˆä¸‰çš„å¹‚çš„å’Œ](/problems/check-if-number-is-a-sum-of-powers-of-three/):
>
> ç»™ä½ ä¸€ä¸ªæ•´æ•°Â nÂ ï¼Œå¦‚æœä½ å¯ä»¥å°†Â nÂ è¡¨ç¤ºæˆè‹¥å¹²ä¸ªä¸åŒçš„ä¸‰çš„å¹‚ä¹‹å’Œï¼Œè¯·ä½ è¿”å›Â trueÂ ï¼Œå¦åˆ™è¯·è¿”å› falseÂ ã€‚
>
> å¯¹äºä¸€ä¸ªæ•´æ•° yÂ ï¼Œå¦‚æœå­˜åœ¨æ•´æ•° xÂ æ»¡è¶³ y == 3xÂ ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªæ•´æ•° yÂ æ˜¯ä¸‰çš„å¹‚ã€‚

[toc]

## æ€è·¯

é¦–å…ˆï¼Œè®¡ç®—å‡ºæ‰€æœ‰ä¸è¶…è¿‡`n`çš„3çš„å¹‚ï¼Œå­˜å…¥ä¸€ä¸ªåˆ—è¡¨`list`ã€‚listçš„é•¿åº¦ä¸º$\lfloor log_{3}n \rfloor$ï¼Œä¹Ÿå°±æ˜¯ä»¥`3`ä¸ºåº•å¯¹`n`å–å¯¹æ•°ï¼Œç„¶åå‘ä¸‹å–æ•´ã€‚

æ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œéœ€è¦åˆ¤æ–­`list`ä¸­æ˜¯å¦å­˜åœ¨è‹¥å¹²ä¸ªæ•°çš„å’Œç­‰äº`n`ï¼Œå¹¶ä¸”**è¿™äº›æ•°å­—ä¸èƒ½é‡å¤**ã€‚

å¯ä»¥ä¸æ–­ä»`n`ä¸­å‡å»ä¸€äº›`list`ä¸­çš„æ•°å­—ï¼Œç›´åˆ°å˜æˆ0ï¼Œåˆ™ç®—æ³•ç»“æŸï¼Œè¿”å›`true`ã€‚

`list`ä¸­çš„æ¯ä¸ªæ•°å­—ï¼Œéƒ½æœ‰è¢«`n`å‡å»ï¼Œæˆ–ä¸è¢«`n`å‡å»ä¸¤ç§å¯èƒ½ï¼Œæ•…æ€»å…±æœ‰$2^{\lfloor log_{3}n \rfloor}$ç§å¯èƒ½æ€§å‡æ³•ã€‚

è€ƒå¯Ÿè¿™$2^{\lfloor log_{3}n \rfloor}$ç§å¯èƒ½æ€§ï¼Œå…¶å®å°±æ˜¯éå†äºŒå‰æ ‘çš„è¿‡ç¨‹ã€‚è¿™é¢—äºŒå‰æ ‘ç¬¬`i - 1`å±‚çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹`node`ï¼Œå…¶å·¦èŠ‚ç‚¹ç­‰äº`node`ï¼Œå³èŠ‚ç‚¹ç­‰äº`node - list[i]`ï¼›äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ç­‰äº`n`ã€‚

éå†äºŒå‰æ ‘ï¼Œæœ‰å›ºå®šçš„çš„ä»£ç æ¨¡æ¿ã€‚å¯¹äºè¿™é“é¢˜ï¼Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š
1. é‡åˆ°0æ—¶ï¼Œéå†ç»ˆæ­¢ï¼Œç®—æ³•è¿”å›
2. è¦ææ¸…æ¥šè¿™é¢—äºŒå‰æ ‘èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œå¦åˆ™å¤´è„‘ä¼šæ¯”è¾ƒæ··ä¹±

## ä»£ç 

### å±‚åºéå†ï¼ˆBFSï¼‰

* java

```java
class Solution {
    public boolean checkPowersOfThree(int n) {
        List<Integer> list = new ArrayList<>();
        for(int x = 1; x <= n; x *= 3)list.add(x);
        Queue<Integer> q = new LinkedList<>();
        q.offer(n);
        for(int x : list){
            int size = q.size();
            while(size-- >= 1){
                int p = q.poll();
                if(p - x == 0)return true;
                q.offer(p);
                q.offer(p - x); 
            }
        }
        return false;
    }
}
```

### DFS(å‰åºã€ä¸­åºã€åé¡ºéå†)

* java

```java
class Solution {
    public boolean checkPowersOfThree(int n) {
        List<Integer> list = new ArrayList<>();
        for(int x = 1; x <= n; x *= 3)list.add(x);
        return postOrderSearch(list, 0, n);
    }

    /** å‰åºéå†*/
    private boolean preOrderSearch(List<Integer> list, int deep, int node){
        if(deep >= list.size())return node == 0;
        int left = node, right = node - list.get(deep);
        if(node == 0)return true;
        if(preOrderSearch(list, deep + 1, left))return true;
        return inOrderSearch(list, deep + 1, right);
    }

    /** ä¸­åºéå†*/
    private boolean inOrderSearch(List<Integer> list, int deep, int node){
        if(deep >= list.size())return node == 0;
        int left = node, right = node - list.get(deep);
        if(preOrderSearch(list, deep + 1, left))return true;
        if(node == 0)return true;
        return preOrderSearch(list, deep + 1, right);
    }

    /** ååºéå†*/
    private boolean postOrderSearch(List<Integer> list, int deep, int node){
        if(deep >= list.size())return node == 0;
        int left = node, right = node - list.get(deep);
        if(preOrderSearch(list, deep + 1, left))return true;
        if(preOrderSearch(list, deep + 1, right))return true;
        return node == 0;
    }
}
```

## å¤æ‚åº¦

> **æ—¶é—´å¤æ‚åº¦**ï¼š$O(n^{1/log_{2}3})$ã€‚

ç”Ÿæˆ`list`ï¼Œéœ€è¦$O(logn)$ã€‚æœ€åæƒ…å†µä¸‹ï¼Œéœ€è¦éå†äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚æ­¤äºŒå‰æ ‘æ€»å…±æœ‰$2^m - 1$ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­$m$ä¸ºæ ‘çš„æ·±åº¦ï¼Œ$m = \lfloor log_{3}n \rfloor$ï¼Œæ‰€ä»¥éå†çš„ä»£ä»·ä¸ºï¼š
$$ O(2^m) = O(2^{log_{3}n}) = O(2^{log_{2}n/log_{2}3}) = O(n^{1/log_{2}3}) $$

è¿™æ˜¯ä¸€ä¸ªæ ¹å¼å¹‚ï¼Œæ¸è¿›å¤§äº$O(log n)$ã€‚æ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(n^{1/log_{2}3})$ã€‚è¿™æ˜¯ä¸€ä¸ª**æ ¹å¼å¹‚é˜¶**çš„ä»£ä»·ï¼Œ**å°äºçº¿æ€§é˜¶ï¼Œå¤§äºå¯¹æ•°é˜¶**ã€‚

> **ç©ºé—´å¤æ‚åº¦**ï¼š$O(\log n)$ï¼ˆdfsï¼‰ï¼Œæˆ–è€…$O(n^{1/log_{2}3})$ï¼ˆbfsï¼‰ã€‚

å¯¹äºdfsï¼Œé€’å½’æ ˆå¼€é”€å’Œå­˜å‚¨`list`ï¼Œå‡ä¸º$O(\log n)$ã€‚å¯¹äºbfsï¼Œæœ€å¤šéœ€è¦å…¥é˜Ÿæ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼Œæ•…éœ€è¦$O(n^{1/log_{2}3})$çš„ç©ºé—´ã€‚

å¯è§ï¼Œå¯¹äºæœ¬é¢˜ï¼Œdfsç©ºé—´æ¶ˆè€—æ›´å°ã€‚

## æ€»ç»“

æ¯”èµ·[å®˜è§£è½¬æ¢ä¸º3è¿›åˆ¶çš„éªšæ“ä½œ](https://leetcode.cn/problems/check-if-number-is-a-sum-of-powers-of-three/solution/pan-duan-yi-ge-shu-zi-shi-fou-ke-yi-biao-0j5k/)ï¼Œæœ¬è§£æ³•ç¡®å®ç•¥é€Šä¸€ç­¹ï¼Œæ—¶é—´å¤æ‚åº¦å¤§äºå®˜è§£çš„å¯¹æ•°é˜¶ã€‚åæ­£å†è¿‡ä¸€ä¸‡å¹´ï¼Œæˆ‘ä¹Ÿä¸ä¼šæƒ³å‡ºè¿™ç§æ“ä½œğŸ¤£

ä½†æ˜¯æœ¬è§£å°†é—®é¢˜è½¬æ¢ä¸ºäºŒå‰æ ‘éå†ï¼Œæ›´é€šç”¨ä¸€ç‚¹ï¼Œé€‚åˆæˆ‘è¿™æ ·çš„æ™®é€šå¤§è„‘ã€‚

å‘ç°å¾ˆå¤šé—®é¢˜ï¼Œå…¶å®éƒ½å¯ä»¥è½¬æ¢ä¸ºå›¾è®ºé—®é¢˜ï¼ˆæ ‘ä¹Ÿæ˜¯å›¾ï¼‰ï¼Œæ¯”å¦‚å’Œæœ¬é¢˜è¡¨é¢ä¸Šæœ‰ç‚¹ç±»ä¼¼çš„é¢˜ï¼š[279. å®Œå…¨å¹³æ–¹æ•°](https://leetcode.cn/problems/problems/perfect-squares/)ã€‚æˆ‘ç¬¬ä¸€æ¬¡çŸ¥é“279é¢˜å¯ä»¥è½¬æ¢ä¸ºå›¾è®º**æœ€çŸ­è·¯å¾„é—®é¢˜**çš„æ—¶å€™ï¼ŒçœŸçš„æƒŠå‘†äº†ã€‚

å°†é™Œç”Ÿçš„é—®é¢˜ï¼Œè½¬æ¢ä¸ºå¸¸è§„ç®—æ³•é¢˜ï¼Œéœ€è¦æ¯”è¾ƒå¼ºçš„æŠ½è±¡èƒ½åŠ›ï¼Œæˆ‘è¿˜ä¸è¡Œï¼Œéœ€è¦å¤šç»ƒä¹ ã€‚

æ¯”å¦‚ä»Šå¤©è¿™é“é¢˜ï¼Œæˆ‘ç¬¬ä¸€çœ¼å°±æƒ³åˆ°äº†279é¢˜ï¼Œä½†æ˜¯ä¸¤é“é¢˜çš„ç›¸ä¼¼åªæ˜¯è¡¨é¢çš„ï¼Œ279é¢˜å…è®¸é‡å¤ï¼Œè€Œè¿™é“é¢˜ä¸å…è®¸ï¼›279é¢˜è¦æ±‚çš„æ˜¯æœ€å€¼ï¼Œè€Œè¿™é“é¢˜è¦æ±‚çš„å´æ˜¯å­˜åœ¨æ€§ã€‚å› ä¸ºç”Ÿæ¬ç¡¬å¥—ã€‚æˆ‘ä»Šå¤©åœ¨è„‘æµ·é‡Œæ„å»ºäº†æ— æ•°ç§å½¢æ€çš„å›¾ï¼Œä¸€å¼€å§‹æ€ä¹ˆéƒ½ç†ä¸é¡ºï¼Œç”šè‡³å†™å‡ºäº†ä¸‹é¢è¿™æ ·ä¼šè¶…æ—¶çš„ä»£ç ğŸ˜“ï¼š

* java

```java
class Solution {
    public boolean checkPowersOfThree(int n) {
        Set<Integer> set = new HashSet<>();
        for(int x = 1; x <= n; x *= 3)set.add(x);
        Queue<Integer> q = new LinkedList<>();
        Queue<Set<Integer>> setQ = new LinkedList<>();
        q.offer(n);
        setQ.offer(set);
        while(!q.isEmpty()){
            int size = q.size();
            while(size-- >= 1){
                int p = q.poll();
                Set<Integer> p1 = setQ.poll();
                for(int x: p1){
                    if(p - x == 0)return true;
                    Set<Integer> newSet = new HashSet<>(p1);
                    newSet.remove(x);
                    q.offer(p - x);
                    setQ.offer(newSet);                  
                }
                
            }
        }
        return false;
    }
}
```

è¿™ä¸ªç‰ˆæœ¬çš„æ€è·¯æ˜¯ï¼šBFSä¸€å¼ å›¾ï¼Œå›¾çš„é¡¶ç‚¹å€¼æ˜¯ä»`n`ä¸­å‡æ‰è‹¥å¹²ä¸ª3çš„å¹‚ï¼Œé¡¶ç‚¹çš„**å‡ºè¾¹**æŒ‡å‘ä»è‡ªèº«å‡æ‰ä»»æ„ä¸€ä¸ª3çš„å¹‚å½¢æˆçš„æ–°é¡¶ç‚¹ã€‚è¿™å¼ å›¾ï¼Œ**å’Œå‰æ–‡ä¸­çš„äºŒå‰æ ‘çš„é¡¶ç‚¹æ•°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¼šå½¢æˆæ›´å¤šçš„è¾¹**ï¼Œæ‰€ä»¥è¶…æ—¶ã€‚

å¯è§ï¼Œåˆé€‚çš„æŠ½è±¡ï¼ŒçœŸçš„å¾ˆé‡è¦ã€‚

